<section class="dashboard-page page" ng-controller="DashboardController as dashCtrl">

  <div ng-hide="dashCtrl.auth.getLoggedUser()">
    Please log in to view the content.
  </div>

  <div ng-hide="dashCtrl.auth.isManager()">
    Unfortunately, you don't have enough privileges to see the page.
  </div>


  <!-- Project Managers -->
  <div ng-if="dashCtrl.auth.isManager()" class="dashboard-content">

    <!-- Charity -->
    <div ng-if="dashCtrl.auth.isManager() && !dashCtrl.auth.isSuperadmin()" class="col-lg-12 col-md-12 dashboard-nav-top">
      <div class="dashboard-image col-lg-1 col-md-1">
        <img class="dashboard-image-in" src="{{dashCtrl.charity.initializerImg}}" alt="">
      </div>
      <div class="dashboard-title col-lg-5 col-md-5">
        {{ dashCtrl.projectsForMain[0].charity.name }}
      </div>
    </div>

    <!-- Alice -->
    <div ng-if="dashCtrl.auth.isSuperadmin()" class="col-lg-12 col-md-12 dashboard-nav-top">
      <div class="dashboard-image col-lg-1 col-md-1">
        <img class="dashboard-image-in" src="https://s3.eu-west-2.amazonaws.com/alice-res/AliceLogoOnly.png" style="height: 40px; width: auto;" alt="">
      </div>
      <div class="dashboard-title col-lg-5 col-md-5">
        Hello, {{ dashCtrl.auth.getLoggedFullName() }}
      </div>
    </div>


    <div class="row">
      <div class="col-lg-3 col-md-3 dashboard-nav-side">
        <div id="dashboard-overview" class="dashboard-tab-group">
          <h1 class="tab-group-title">PROJECT OVERVIEW</h1>
          <h2 class="dashboard-tabs col-lg-10 col-lg-offset-1" style="margin-top: 0px;">
            <a class="col-lg-12 dashboard-side-tab{{dashCtrl.mode == 0 ? '-active' : ''}}" ng-click="dashCtrl.setMode('OVERALL')">
              <div style="height: 15px; width: auto"><img src="https://s3.eu-west-2.amazonaws.com/alice-res/bar-chart.png" style="height: 15px; margin: -4px 8px 0 0; width: auto;" alt=""></div>
              Overall Performance
            </a>
            <a class="col-lg-12 dashboard-side-tab">
              <div style="height: 15px; width: auto"><img src="https://s3.eu-west-2.amazonaws.com/alice-res/focus.png" style="height: 15px; margin: -4px 8px 0 0; width: auto;" alt=""></div>
              Compare <span style="margin-left: 8px; padding-top: 2px; font-size: 9px; color: #1CB8C4; text-transform: uppercase; font-weight: 400; letter-spacing: 1px;">Coming Soon!</span>
            </a>
          </h2>
        </div>
        <h1 class="tab-group-title">PROJECT DETAILS</h1>
        <div id="dashboard-projects" class="dashboard-tab-group">
          <div class="dashboard-tabs-container">
            <div style="height: auto;" ng-repeat="project in dashCtrl.projectsForMain">
              <h2 class="dashboard-tabs col-lg-10 col-lg-offset-1">
                <a class="col-lg-12 dashboard-side-tab{{dashCtrl.projectSelected.includes(project.code) ? '-active' : ''}}"
                ng-click="dashCtrl.selectProject(project.code)">
                {{ project.title | smallTitle }}
                  <span>
                    <i class="fa fa-side-tab fa-angle-{{dashCtrl.projectSelected.includes(project.code) ? 'down' : 'right'}}"></i>
                  </span>
                </a>
              </h2>
              <div class="inside-tabs" ng-if="dashCtrl.projectSelected.includes(project.code)">
                <ul>
                  <li><a class="col-lg-10 dashboard-side-tab{{(dashCtrl.mode === 1) && (dashCtrl.activeProject.code == project.code) ? '-active' : ''}}" ng-click="dashCtrl.setProject(project, 'SINGULAR')">Overview</a></li>
                  <li><a class="col-lg-10 dashboard-side-tab{{(dashCtrl.mode === 2) && (dashCtrl.activeProject.code == project.code) ? '-active' : ''}}" ng-click="dashCtrl.setProject(project, 'DONATIONS')">Donations</a></li>
                  <li><a class="col-lg-10 dashboard-side-tab{{(dashCtrl.mode === 3) && (dashCtrl.activeProject.code == project.code) ? '-active' : ''}}" ng-click="dashCtrl.setProject(project, 'GOALS')">Goals</a></li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-offset-3 col-lg-9 col-md-offset-3 col-md-9 dashboard-main-view">
        <dashboard-overview ng-if="dashCtrl.mode == 0" setproject="dashCtrl.setProject(project, code)" model="dashCtrl.projectsForMain"></dashboard-overview>
        <dashboard-project ng-if="dashCtrl.mode == 1" setproject="dashCtrl.setProject(project, code)" project="dashCtrl.activeProject"></dashboard-project>
        <dashboard-donations ng-if="dashCtrl.mode == 2" active-project="dashCtrl.activeProject"></dashboard-donations>
        <dashboard-goals ng-if="dashCtrl.mode == 3" active-project="dashCtrl.activeProject"></dashboard-goals>
      </div>
    </div>
  </div>
</section>
