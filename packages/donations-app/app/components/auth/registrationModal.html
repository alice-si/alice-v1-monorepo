<div class="modal-body" ng-controller="RegistrationController as regCtrl">
  <h2 class="section">Sign up</h2>

  <treasure-overlay-spinner active="regCtrl.signing">
    <div class="content registration">

      <div class="description" style="padding: 0">
        Create an account to make donations and track your impact.
        You'll be notified each time your gift has helped a charity achieve its project goals.
      </div>

      <form role="form" style="margin-top: 2%;" name="regCtrl.registrationForm" novalidate>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group" has-error>
              <div>
                <input id="registration-first-name" class="form-control" type="text" name="firstName"
                       placeholder="First name"
                       ng-model="regCtrl.registration.firstName" required>
                <error-message name="firstName" error="required">This field is required</error-message>
              </div>
            </div>
          </div>
          <div class="col-md-6">
            <div class="form-group" has-error>
              <div>
                <input id="registration-last-name" type="text" name="lastName" placeholder="Last name"
                       ng-model="regCtrl.registration.lastName"
                       class="form-control" required>
                <error-message name="lastName" error="required">This field is required</error-message>
              </div>
            </div>
          </div>
        </div>

        <div class="form-group" has-error>
          <div>
            <p class="input-group">
              <input id="registration-date-of-birth" type="text" class="form-control"
                     uib-datepicker-popup="dd/MM/yyyy" is-open="regCtrl.dobOpened"
                     ng-model="regCtrl.registration.dateOfBirth"
                     datepicker-options="{datepickerMode: 'year'}"
                     show-button-bar="false" ng-required="true" name="dateOfBirth" under18
                     placeholder="Date of birth (DD/MM/YYYY)"/>
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="regCtrl.dobOpened = true"><i
                        class="glyphicon glyphicon-calendar"></i></button>
              </span>
            </p>
            <error-message name="dateOfBirth" error="date">
              Please provide a date in the correct format (DD/MM/YYYY)
            </error-message>
            <error-message name="dateOfBirth" error="under18">You must be at least 18 years old</error-message>
            <error-message name="dateOfBirth" error="required">This field is required</error-message>
          </div>
        </div>

        <div class="form-group" has-error>
          <div>
            <country-select id="registration-nationality" name="nationality" cs-priorities="GB"
                            ng-model="regCtrl.registration.nationality"
                            class="form-control" required prompt="Nationality"></country-select>
            <error-message name="nationality" error="required">This field is required</error-message>
          </div>
        </div>

        <div class="form-group" has-error>
          <div>
            <country-select id="registration-residence" name="residence" cs-priorities="GB"
                            ng-model="regCtrl.registration.residence"
                            class="form-control" required prompt="Country of residence"></country-select>
            <error-message name="residence" error="required">This field is required</error-message>
          </div>
        </div>

        <div class="form-group" has-error>
          <div>
            <input id="registration-email" type="email" name="email" placeholder="Email address"
                   ng-model="regCtrl.registration.email"
                   ng-disabled="regCtrl.mode == 'REGISTRATION_FINISHING'"
                   class="form-control" required
                   ng-pattern="/([a-zA-Z0-9!#$%&\'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&\'*+/=?^_`{|}~-]+)*)@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?/">
            <error-message name="email" error="required">This field is required</error-message>
            <error-message name="email" error="email">Wrong format of email address</error-message>
            <error-message name="email" error="pattern">Wrong format of email address</error-message>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <div class="form-group" has-error>
              <div>
                <input id="registration-password" type="password" name="password" placeholder="Set a password"
                       ng-model="regCtrl.registration.password" complex-password minlength="8"
                       class="form-control" required>
                <error-message name="password" error="required">This field is required</error-message>
                <error-message name="password" error="upperCase">Password must contain an uppercase letter
                </error-message>
                <error-message name="password" error="digit">Password must contain at least one digit
                </error-message>
                <error-message name="password" error="minlength">Password must contain at least 8 characters
                </error-message>
              </div>
            </div>
          </div>
          <div class="col-md-6">

            <div class="form-group" has-error>
              <div>
                <input id="registration-password-confirmation" type="password" name="passwordConfirmation"
                       placeholder="Retype password" ng-model="regCtrl.registration.passwordConfirmation"
                       class="form-control" pw-check="regCtrl.registration.password" required>
                <error-message name="passwordConfirmation" error="required">This field is required
                </error-message>
                <error-message name="passwordConfirmation" error="pwmatch">Passwords must match
                </error-message>
              </div>
            </div>
          </div>
        </div>

        <div class="row"
             ng-show="regCtrl.duplicatedEmail && (regCtrl.duplicatedEmail == regCtrl.registration.email)">
          <div class="col-md-12">
            <p class="text-error">
              User with email {{regCtrl.duplicatedEmail}} is already registered
            </p>
          </div>
        </div>

        <div class="registration-terms">
          By signing up you agree to our
          <a href="https://s3.eu-west-2.amazonaws.com/alice-res/terms_of_use.pdf" target="_blank">Terms of Use</a> &
          <a href="https://s3.eu-west-2.amazonaws.com/alice-res/privacy_policy.pdf" target="_blank">Privacy Policy</a>
        </div>

        <div class="registration-agreement">
          <input icheck type="checkbox" ng-model="regCtrl.registration.agreeContact">
          <div class="registration-agreement-content">
            Tick here to allow Alice to share your contact details and donation information with the charities
            whose projects you donate to. This will allow them to send you messages about their other projects
            and donation appeals.
          </div>
        </div>

        <div class="registration-agreement">
          <input icheck type="checkbox" ng-model="regCtrl.registration.agreeAlice">
          <div class="registration-agreement-content">
            Alice can send you general updates and messages about other projects on the platform.
            If you don't wish to receive these messages, please untick this box.
          </div>
        </div>

        <div style="text-align: right;">
          <button id="registration-sign-up-button" class="btn btn-primary btn-donate btn-modal"
                  ng-click="regCtrl.register()" type="submit">
            Sign up
          </button>
        </div>
      </form>
    </div>
  </treasure-overlay-spinner>
</div>
